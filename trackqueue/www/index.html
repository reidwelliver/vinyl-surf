<!doctype html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="uri.js"></script>
        <script src="datagetter.js"></script>
        <script>
       $(document).ready(function(){
         console.log("text");
          var socket = io.connect(':42081/track');


          socket.on('askedforplaylistresults', function(recieveddata){
            //recieved data for this one should be a json
            console.log(recieveddata);

            //for the for loop
            var trackamount=recieveddata.length;

            console.log(trackamount);
            //begining of the table for output
            var tableforoutput = "<table><tr><td>Track Name</td><td>URL</td><td>Length</td>";

            //the datacomes as objects inside of an array. This loops through the array and splits each apart so the table can be formed.
            for (i = 0; i < trackamount; i++) {
                tableforoutput += "<tr>";
                tableforoutput += "<td>"+recieveddata[i]["NAME"]+"</td><td>"+recieveddata[i]["URL"]+"</td><td>"+recieveddata[i]["length"]+"</td><td><button type='button' onclick='RemoveTrack("+ recieveddata[i]['ID'] +")' class='button'>Remove</button></td>";
                tableforoutput += "</tr>";
                console.log(tableforoutput);

              }
              tableforoutput += "</table>";
              document.getElementById('Message').innerHTML=tableforoutput;


            });


            socket.on('USERSPLAYLISTS', function(recieveddata){
              //recieved data for this one should be an json,
              console.log(recieveddata);

              var playlisttotal=recieveddata.length;

              for (i = 0; i < playlisttotal; i++) {

                var x = document.getElementById("PlaylistSelecter");
                var option = document.createElement("option");
                option.text = recieveddata[i]["name"];
                x.add(option);

              }
            });
        });
        </script>
    </head>
    <body>

        <button type="button" onclick="YoutubeInfo()" class="button">Single URL test</button>
        <button type="button" onclick="OutputResults()" class="button">Output and send results</button>
        <button type="button" onclick="ShowPlaylist()" class="button">Show Playlist</button>
        <button type="button" onclick="RetrievePlaylists()" class="button">Retrieve Playlists</button>
        <button type="button" onclick="AddPlaylist()" class="button">Add Playlist</button>


        <form id="Theonlyform">
            Test URL: <input type="text"><br>
            Title Edit: <input type="text"><br>
            Playlist: <input type="text"><br>
            User: <input type="text"><br>
        </form>


        <select name="PlaylistSelecter" id="PlaylistSelecter" form="Theonlyform">

        </select>


        <p id="Message">

        </p>
        <p id="box1"></p>
        <p id="mysqlreturn"></p>
    </body>
</html>
